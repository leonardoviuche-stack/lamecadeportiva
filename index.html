
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>La Meca Deportiva</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    body { background: #0E1621; color: #E9ECF1; }
    .card { background: rgba(255,255,255,0.04); border-radius: 12px; padding: 16px;}
    .muted { color: rgba(233,236,241,0.7); }
    header img.logo { width:64px; height:64px; object-fit:contain; }
    /* simple responsive video grid */
    .video-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:12px; }
  </style>
</head>
<body class="antialiased">
  <header class="max-w-6xl mx-auto p-6 flex items-center justify-between">
    <div class="flex items-center gap-4">
      <img class="logo" src="/meca-logo.png" alt="La Meca Deportiva (logo placeholder)">
      <div>
        <h1 class="text-3xl font-bold">La Meca Deportiva</h1>
        <p class="muted text-sm">Comunicaciones · Relatos · Noticias deportivas </p>
      </div>
    </div>
    <div>
      <a id="whatsappLink" href="#" class="px-4 py-2 bg-white text-[#0E1621] rounded-full font-semibold">Contratar relatos</a>
    </div>
  </header>

  <main class="max-w-6xl mx-auto p-6 space-y-8">
    <!-- Noticias principales -->
    <section id="noticias" class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="card md:col-span-2">
        <h2 class="text-2xl font-bold mb-2">Noticias destacadas</h2>
        <div id="newsList" class="space-y-4">
          <!-- articles inserted by JS -->
        </div>
      </div>

      <aside class="card space-y-4">
        <h3 class="font-semibold">Tabla BetPlay (Liga)</h3>
        <div id="betplayTable" class="text-sm muted">Cargando tabla...</div>

        <h3 class="mt-4 font-semibold">Próx. partidos Champions</h3>
        <div id="championUpcoming" class="text-sm muted">Cargando partidos...</div>
      </aside>
    </section>

    <!-- Deportes específicos -->
    <section id="secciones" class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div class="card">
        <h3 class="text-xl font-semibold">Fútbol — Seguimiento BetPlay y Copa Sudamericana</h3>
        <div id="futbolSection" class="mt-3 space-y-3 muted">
          <p>Últimos partidos y resúmenes.</p>
          <div id="futbolMatches"></div>
        </div>
      </div>

      <div class="card">
        <h3 class="text-xl font-semibold">Ciclismo — Calendario y resultados</h3>
        <div id="ciclismoSection" class="mt-3 muted">
          <div id="ciclismoEvents">Cargando eventos...</div>
        </div>
      </div>

      <div class="card">
        <h3 class="text-xl font-semibold">Motorsports — F1, F2, MotoGP</h3>
        <div id="motorsportSection" class="mt-3 muted">Cargando carreras...</div>
      </div>

      <div class="card">
        <h3 class="text-xl font-semibold">Tenis — Torneos nacionales e internacionales</h3>
        <div id="tenisSection" class="mt-3 muted">Cargando torneos...</div>
      </div>
    </section>

    <!-- Videos de relatos -->
    <section id="relatos" class="card">
      <h2 class="text-2xl font-bold mb-4">Relatos — Videos</h2>
      <div class="video-grid" id="videoGallery">
        <!-- video items -->
      </div>
    </section>

    <!-- Fotos de la fundación -->
    <section id="fotos" class="card">
      <h2 class="text-2xl font-bold mb-4">Fundación — Fotos</h2>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-3" id="photoGallery">
        <!-- photos go here -->
      </div>
    </section>

    <!-- Zona 360 -->
    <section id="zona360" class="card">
      <h2 class="text-2xl font-bold mb-2">Zona Interactiva 360°</h2>
      <p class="muted text-sm">Visitas virtuales y micro-documentales (demo).</p>
      <!-- placeholder -->
      <div style="height:260px" class="w-full bg-[#09101a] rounded mt-3 flex items-center justify-center muted">Zona 360° (demo)</div>
    </section>

    <footer class="text-center muted text-sm">© 2025 La Meca Deportiva — Demo</footer>
  </main>

  <script>
    /*************************************************************************
     * Demo frontend logic
     * - This single-file prototype fetches data from placeholder endpoints:
     *   /api/news, /api/betplay, /api/copa, /api/champions, /api/ciclismo,
     *   /api/motorsports, /api/tenis, /api/videos, /api/photos
     *
     * - For a working site, implement those endpoints server-side. See notes below.
     *************************************************************************/

    // Fallback sample data (used if API endpoints are not available)
    const FALLBACK = {
      news: [
        { category: 'futbol_colombiano', title: 'Once Caldas vs Independiente del Valle: clásico internacional', summary: 'victoria del Blanco, blanco  0-2 en Ecuador: emociones y oportunidades para ambos equipos.' },
        { category: 'ciclismo', title: 'Clásico RCN: etapa reina marcó diferencias', summary: 'Los escaladores nacionales abrieron brecha en la general tras una jornada exigente.'},
        { category: 'automovilismo', title: 'Gran Premio de Italia: resumen', summary: 'Monza no defrauda: estrategia y velocidad en la pista.'}
      ],
      betplay: {
        table: [
          { pos:1, team:'Millonarios', pts:38 },
          { pos:2, team:'Nacional', pts:36 },
          { pos:3, team:'Once Caldas', pts:33 },
          { pos:4, team:'Junior', pts:30 }
        ]
      },
      champions: [
        { home:'Real Madrid', away:'Chelsea', datetime:'2025-11-05T15:00:00Z' },
        { home:'Manchester City', away:'PSG', datetime:'2025-11-06T19:00:00Z' }
      ],
      copa: [
        { stage:'Octavos', home:'Once Caldas', away:'Club X', date:'2025-10-20' }
      ],
      ciclismo: [
        { name:'Clásico RCN - Etapa 5', date:'2025-09-12', summary:'Jornada de montaña' }
      ],
      motorsports: [
        { series:'F1', event:'Gran Premio de Italia', date:'2025-09-07' },
        { series:'MotoGP', event:'Gran Premio de Aragón', date:'2025-09-14' }
      ],
      tenis: [
        { tournament:'US Open', stage:'Final', date:'2025-09-10' }
      ],
      videos: [
        { title:'Relato: Millonarios vs Nacional', src:'https://www.w3schools.com/html/mov_bbb.mp4' },
        { title:'Relato: Once Caldas vs IDV', src:'https://www.w3schools.com/html/mov_bbb.mp4' }
      ],
      photos: [
        'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=800&q=60',
        'https://images.unsplash.com/photo-1511988617509-a57c8a288659?w=800&q=60',
        'https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?w=800&q=60',
        'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=800&q=60'
      ]
    };

    // Utility: try to fetch JSON, fallback to data on error
    async function fetchJSON(url, fallback) {
      try {
        const res = await fetch(url, {cache: 'no-store'});
        if (!res.ok) throw new Error('no api');
        return await res.json();
      } catch (e) {
        return fallback;
      }
    }

    // Render functions
    function renderNews(items) {
      const container = document.getElementById('newsList');
      container.innerHTML = '';
      items.forEach(it => {
        const el = document.createElement('div');
        el.className = 'p-3 rounded';
        el.innerHTML = `<h4 class="font-semibold">${it.title}</h4><p class="text-sm muted">${it.summary || ''}</p>`;
        container.appendChild(el);
      });
    }

    function renderBetplay(table) {
      const el = document.getElementById('betplayTable');
      el.innerHTML = '<table class="w-full text-sm text-left"><thead><tr><th>#</th><th>Equipo</th><th>Pts</th></tr></thead><tbody></tbody></table>';
      const tbody = el.querySelector('tbody');
      table.forEach(row => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td class="pr-3">${row.pos}</td><td>${row.team}</td><td class="text-right">${row.pts}</td>`;
        tbody.appendChild(tr);
      });
    }

    function renderChampions(list) {
      const el = document.getElementById('championUpcoming');
      el.innerHTML = '';
      list.forEach(m => {
        const d = new Date(m.datetime);
        const p = document.createElement('div');
        p.textContent = `${m.home} vs ${m.away} — ${d.toLocaleString()}`;
        el.appendChild(p);
      });
    }

    function renderFutbol(matches) {
      const el = document.getElementById('futbolMatches');
      el.innerHTML = '';
      matches.forEach(m => {
        const div = document.createElement('div');
        div.className = 'mb-2';
        div.innerHTML = `<strong>${m.home || m.title}</strong> <div class="muted text-sm">${m.summary || (m.date||'')}</div>`;
        el.appendChild(div);
      });
    }

    function renderCiclismo(events) {
      const el = document.getElementById('ciclismoEvents');
      el.innerHTML = '';
      events.forEach(ev => {
        const d = document.createElement('div');
        d.innerHTML = `<strong>${ev.name}</strong> <div class="muted text-sm">${ev.date} — ${ev.summary || ''}</div>`;
        el.appendChild(d);
      });
    }

    function renderMotors(list) {
      const el = document.getElementById('motorsportSection');
      el.innerHTML = '';
      list.forEach(r => {
        const d = document.createElement('div');
        d.innerHTML = `<strong>${r.series}</strong>: ${r.event} <div class="muted text-sm">${r.date}</div>`;
        el.appendChild(d);
      });
    }

    function renderTenis(list) {
      const el = document.getElementById('tenisSection');
      el.innerHTML = '';
      list.forEach(t => {
        const d = document.createElement('div');
        d.innerHTML = `<strong>${t.tournament}</strong> — ${t.stage || ''} <div class="muted text-sm">${t.date || ''}</div>`;
        el.appendChild(d);
      });
    }

    function renderVideos(videos) {
      const grid = document.getElementById('videoGallery');
      grid.innerHTML = '';
      videos.forEach(v => {
        const c = document.createElement('div');
        c.innerHTML = `<video controls style="width:100%; border-radius:8px;"><source src="${v.src}" type="video/mp4">Tu navegador no soporta video.</video><div class="mt-2">${v.title}</div>`;
        grid.appendChild(c);
      });
    }

    function renderPhotos(photos) {
      const grid = document.getElementById('photoGallery');
      grid.innerHTML = '';
      photos.forEach(p => {
        const img = document.createElement('img');
        img.src = p;
        img.className = 'w-full h-40 object-cover rounded';
        grid.appendChild(img);
      });
    }

    // Main updater: tries APIs then falls back to static demo data
    async function updateAll() {
      // try to fetch real endpoints; replace with your deployed endpoints when ready
      const news = await fetchJSON('/api/news', FALLBACK.news);
      const betplay = await fetchJSON('/api/betplay', FALLBACK.betplay);
      const champions = await fetchJSON('/api/champions', FALLBACK.champions);
      const copa = await fetchJSON('/api/copa', FALLBACK.copa);
      const ciclismo = await fetchJSON('/api/ciclismo', FALLBACK.ciclismo);
      const motors = await fetchJSON('/api/motorsports', FALLBACK.motorsports);
      const tenis = await fetchJSON('/api/tenis', FALLBACK.tenis);
      const videos = await fetchJSON('/api/videos', FALLBACK.videos);
      const photos = await fetchJSON('/api/photos', FALLBACK.photos);

      renderNews(news);
      renderBetplay(betplay.table || betplay);
      renderChampions(champions);
      renderFutbol(copa.concat(news.filter(n=>n.category && n.category.includes('futbol'))));
      renderCiclismo(ciclismo);
      renderMotors(motors);
      renderTenis(tenis);
      renderVideos(videos);
      renderPhotos(photos);
    }

    // Initial update and periodic refresh
    updateAll();
    setInterval(updateAll, 1000 * 60 * 2); // cada 2 minutos

    /*************************************************************************
     * Deployment notes (server-side)
     *
     * Implement server endpoints that the frontend calls:
     *  - GET /api/news?cats=...  -> returns array of {title, summary, category, url}
     *  - GET /api/betplay        -> returns { table: [ {pos, team, pts} ] }
     *  - GET /api/champions      -> returns upcoming matches with datetime (ISO)
     *  - GET /api/copa           -> returns copa sudamericana matches and tracking info
     *  - GET /api/ciclismo       -> upcoming races and results
     *  - GET /api/motorsports    -> upcoming events for F1/F2/MotoGP
     *  - GET /api/tenis          -> tournaments and matches
     *  - GET /api/videos         -> returns hosted video URLs (or embed IDs)
     *  - GET /api/photos         -> returns image URLs
     *
     * Server architecture suggestion:
     *  - Use a serverless function (Vercel / Netlify / AWS Lambda) for each endpoint.
     *  - Each function aggregates data from:
     *      * Official feeds / APIs (FIFA, CONMEBOL, Datalytics providers, sportsdbs)
     *      * RSS feeds from trusted media
     *      * Official competition APIs (where available)
     *  - For AI summarization and normalization:
     *      * Use an LLM (OpenAI) to summarize articles and normalize fields. Example flow:
     *           1) Fetch new items (RSS / API)
     *           2) Deduplicate
     *           3) Call LLM to produce short summary (<=40 words) and a normalized title
     *           4) Store in cache (Redis) and return to frontend
     *
     * - For real-time match updates (scores & table):
     *      * Use a sports data provider (or scrapers) to get minute-by-minute events.
     *      * Update table logic server-side and provide JSON to frontend.
     *
     * Security & Costs:
     *  - Cache heavily (Redis) to reduce LLM calls.
     *  - Rate-limit and authenticate admin endpoints.
     *
     * If quieres, puedo entregarte ejemplos listos para deploy en Vercel (node serverless), incluyendo:\n     - scripts para llamar a OpenAI y resumir artículos\n     - ejemplo de scraping legal con RSS\n     - ejemplo de webhook para recibir notificaciones deportivas\n     *
     *************************************************************************/
  </script>
</body>
</html>
